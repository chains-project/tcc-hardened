name: Release tcc-hardened
run-name: ${{ github.actor }} is releasing tcc using DDC ðŸš€
on: 
  workflow_dispatch:
    inputs:
      tcc-commit-hash:
        type: string
        default: "f6385c05308f715bdd2c06336801193a21d69b50"
        description: "Commit hash from https://repo.or.cz/tinycc.git to use as input source in DDC"
      nixpkgs-rev:
        type: string
        default: "a9eb3eed170fa916e0a8364e5227ee661af76fde"
        description: "Nixpkgs hash"

jobs:
  call-ddc4cd:
    uses: chains-project/ddc4cd/.github/workflows/ddc-release.yml@0aa0b247915da5d94e17fdffc7fd584ecc67df50 # v0.2.0
    permissions:
      contents: write
      id-token: write
      attestations: write
    with: 
      tcc-commit-hash: ${{ inputs.tcc-commit-hash }}
      nixpkgs-rev: ${{ inputs.nixpkgs-rev }}
